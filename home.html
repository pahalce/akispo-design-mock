<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AkiSpot - スポット探し</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">
  
  <!-- デザイントークン -->
  <link rel="stylesheet" href="design-tokens.css">
  <script src="tailwind-config.js"></script>
</head>
<body class="min-h-screen bg-gray-50 text-gray-900 font-sans antialiased flex flex-col h-screen">
  <!-- Header -->
  <header class="bg-white shadow-sm h-header flex items-center justify-end px-4 flex-shrink-0 relative z-10">
    <a href="select-map.html" class="flex items-center gap-1.5 text-secondary hover:text-primary transition-colors">
      <span class="material-symbols-outlined">map</span>
      <span class="text-sm font-medium">地図から探す</span>
    </a>
  </header>

  <!-- Main Content -->
  <main class="flex-grow flex flex-col items-center justify-center p-4 pt-0 pb-24">
    <!-- Card Stack -->
    <div class="relative w-full max-w-sm aspect-[3/4.5] mx-auto mb-8">
      <!-- Background Cards (Stack Effect) -->
      <div class="absolute w-full h-full transform -translate-y-6 scale-90 opacity-50 bg-white/50 rounded-3xl"></div>
      <div class="absolute w-full h-full transform -translate-y-3 scale-95 opacity-75 bg-white/70 rounded-3xl"></div>
      
      <!-- Main Card -->
      <div id="main-card" class="absolute w-full h-full bg-white rounded-3xl overflow-hidden shadow-xl flex flex-col cursor-pointer hover:shadow-2xl transition-shadow">
        <!-- Image Section -->
        <div class="flex-grow relative">
          <img 
            alt="カフェの外観" 
            class="w-full h-full object-cover" 
            src="https://lh3.googleusercontent.com/aida-public/AB6AXuAw0IJJX4T68h7-Zip8h0EjonV-V1PO_sAuDjL-h5rmpabcwbEFS9o_rqWHjsKtWjBq_VKUgBGNetvBh4LrqvFuEFj-vDpO_wHKwY949V3sXwpxvVawhbyFY3pjiXhNiFRkE8WRAsRb22yndztfEuVMlz6UiZ4M22Z1C7KBcdMwetF3ujSs3lR7atebWobIByssxAtbkWSI8-93lq8CPeGU7OiDevJovFWio2vwmhGgHkhVJj-uU2k8LKqDeIQSKfQ05NZ5fVOEVXg"
          />
          <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
          
          <!-- Badge -->
          <div class="absolute bottom-4 left-4 right-4">
            <div class="bg-primary text-white rounded-full px-4 py-2 text-sm font-bold inline-flex items-center gap-2 shadow-lg">
              <span class="material-symbols-outlined filled text-xl">chair</span>
              <span>座れそう？</span>
            </div>
          </div>
        </div>
        
        <!-- Info Section -->
        <div class="p-6 text-gray-900 bg-white flex-shrink-0">
          <h2 class="text-3xl font-bold">FREEMAN CAFE</h2>
          <div class="flex items-center gap-2 mt-2 text-gray-600">
            <div class="flex items-center gap-1">
              <span class="material-symbols-outlined text-xl">directions_walk</span>
              <span class="text-base font-medium">徒歩3分</span>
            </div>
            <div class="flex items-center gap-1">
              <span class="material-symbols-outlined text-xl">map</span>
              <span class="text-base font-medium">渋谷</span>
            </div>
          </div>
          
          <!-- Detail Link -->
          <a href="detail.html" class="inline-flex items-center gap-1 mt-3 text-primary hover:text-primary/80 transition-colors" onclick="event.stopPropagation()">
            <span class="text-sm font-medium">詳細を見る</span>
            <span class="material-symbols-outlined text-xl">chevron_right</span>
          </a>
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="flex justify-center items-center gap-8">
      <button id="no-button" class="w-20 h-20 rounded-full bg-white shadow-lg flex items-center justify-center transform hover:scale-105 transition-transform active:scale-95">
        <span class="material-symbols-outlined text-5xl text-destructive">close</span>
      </button>
      <button id="yes-button" class="w-20 h-20 rounded-full bg-white shadow-lg flex items-center justify-center transform hover:scale-105 transition-transform active:scale-95">
        <span class="material-symbols-outlined text-5xl text-primary">near_me</span>
      </button>
    </div>
  </main>

  <!-- Match Dialog Modal -->
  <div id="match-dialog" class="fixed inset-0 z-50 hidden">
    <!-- Overlay -->
    <div id="dialog-overlay" class="absolute inset-0 flex h-full w-full flex-col justify-end items-stretch bg-black/60 animate-fade-in">
      <!-- Bottom Sheet Dialog -->
      <div class="flex flex-col items-stretch bg-white rounded-t-3xl animate-slide-up shadow-2xl" onclick="event.stopPropagation()">
        <!-- Handle -->
        <button id="dialog-handle" class="flex h-5 w-full items-center justify-center pt-3 pb-2 cursor-pointer">
          <div class="h-1.5 w-10 rounded-full bg-gray-300"></div>
        </button>

        <!-- It's a Match! Title -->
        <div class="px-6 py-4 text-center">
          <h2 class="font-serif text-4xl font-bold text-primary">It's a Match!</h2>
        </div>

        <!-- Spot Name -->
        <h1 class="text-secondary text-2xl font-bold px-6 text-center pb-6 pt-2">
          FREEMAN CAFE
        </h1>

        <!-- Action Buttons -->
        <div class="px-6 py-3 space-y-4">
          <button class="flex items-center justify-center gap-2 w-full bg-primary text-white text-lg font-bold py-4 px-5 rounded-xl shadow-lg hover:bg-primary/90 transition-colors">
            <span class="material-symbols-outlined text-2xl">map</span>
            <span>地図で開く</span>
          </button>
          <button class="flex items-center justify-center gap-2 w-full bg-gray-100 text-secondary text-lg font-bold py-4 px-5 rounded-xl shadow-sm hover:bg-gray-200 transition-colors">
            <span class="material-symbols-outlined text-2xl">phone</span>
            <span>電話</span>
          </button>
        </div>

        <!-- Close Button -->
        <div class="px-6 py-4">
          <button id="close-dialog" class="flex items-center justify-center w-full text-secondary text-base font-bold py-3 px-5 rounded-xl hover:bg-gray-100 transition-colors">
            <span>閉じる</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bottom Navigation -->
  <nav class="fixed bottom-0 left-0 right-0 bg-white shadow-lg z-30">
    <div class="flex justify-around max-w-sm mx-auto">
      <a class="flex flex-col items-center justify-center text-primary py-2 px-4 w-1/3 text-center" href="home.html">
        <span class="material-symbols-outlined filled text-4xl">search</span>
        <span class="text-xs font-bold">探す</span>
      </a>
      <a class="flex flex-col items-center justify-center text-gray-600 hover:text-primary py-2 px-4 w-1/3 text-center transition-colors" href="history.html">
        <span class="material-symbols-outlined text-4xl">history</span>
        <span class="text-xs font-bold">履歴</span>
      </a>
      <a class="flex flex-col items-center justify-center text-gray-600 hover:text-primary py-2 px-4 w-1/3 text-center transition-colors" href="settings.html">
        <span class="material-symbols-outlined text-4xl">settings</span>
        <span class="text-xs font-bold">設定</span>
      </a>
    </div>
  </nav>

  <script>
    // カード全体をクリックで詳細画面へ
    document.getElementById('main-card').addEventListener('click', (e) => {
      // YES/NOボタンのクリックは除外
      if (!e.target.closest('#yes-button') && !e.target.closest('#no-button')) {
        window.location.href = 'detail.html';
      }
    });

    // YESボタンクリックでダイアログを表示
    document.getElementById('yes-button').addEventListener('click', (e) => {
      e.stopPropagation(); // カードのクリックイベントを止める
      document.getElementById('match-dialog').classList.remove('hidden');
      document.body.style.overflow = 'hidden'; // スクロールを無効化
    });

    // NOボタンクリック（モックアップなので何もしない）
    document.getElementById('no-button').addEventListener('click', (e) => {
      e.stopPropagation(); // カードのクリックイベントを止める
      // 実際には次のカードを表示する処理
      console.log('NO button clicked');
    });

    // 閉じるボタンクリックでダイアログを非表示
    document.getElementById('close-dialog').addEventListener('click', () => {
      document.getElementById('match-dialog').classList.add('hidden');
      document.body.style.overflow = ''; // スクロールを有効化
    });

    // オーバーレイクリックでダイアログを非表示
    document.getElementById('dialog-overlay').addEventListener('click', () => {
      document.getElementById('match-dialog').classList.add('hidden');
      document.body.style.overflow = ''; // スクロールを有効化
    });

    // ハンドルクリックでダイアログを非表示
    document.getElementById('dialog-handle').addEventListener('click', () => {
      document.getElementById('match-dialog').classList.add('hidden');
      document.body.style.overflow = ''; // スクロールを有効化
    });
  </script>
</body>
</html>

